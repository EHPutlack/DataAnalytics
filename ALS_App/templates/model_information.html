<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Model Information</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <header>
        <img src="{{ url_for('static', filename='images/Logo.PNG') }}" alt="Logo">
        <h1>Model Information</h1>
    </header>

    <nav>
        <ul>
            <li class="{{ 'active' if request.endpoint == 'index' else '' }}">
                <a href="{{ url_for('index') }}">Home</a>
            </li>
            <li class="{{ 'active' if request.endpoint == 'model_information' else '' }}">
                <a href="{{ url_for('model_information') }}">Model Information</a>
            </li>
            <li class="{{ 'active' if request.endpoint == 'data_input' else '' }}">
                <a href="{{ url_for('data_input') }}">Data Input</a>
            </li>
        </ul>
    </nav>

    <!-- Model Performance Table Section -->
    <section class="model-info-section">
        <div class="model-info-container">
            <h2>Model Performance Comparison</h2>
            <table>
                <thead>
                    <tr>
                        <th>Model</th>
                        <th>Accuracy</th>
                        <th>Precision</th>
                        <th>Recall</th>
                        <th>F1 Score</th>
                        <th>ROC AUC</th>
                        <th>MCC</th>
                        <th>Balanced Accuracy</th>
                        <th>Kappa</th>
                        <th>Brier</th>
                        <th>Log Loss</th>
                        <th>F2 Score</th>
                        <th>Jaccard</th>
                        <th>Hamming</th>
                        <th>View Graphs</th>
                    </tr>
                </thead>
                <tbody>
                    {% for index, row in performance.iterrows() %}
                    <tr>
                        <td>{{ row['Model'] }}</td>
                        <td>{{ row['accuracy'] }}</td>
                        <td>{{ row['precision'] }}</td>
                        <td>{{ row['recall'] }}</td>
                        <td>{{ row['f1'] }}</td>
                        <td>{{ row['roc_auc'] }}</td>
                        <td>{{ row['mcc'] }}</td>
                        <td>{{ row['balanced_accuracy'] }}</td>
                        <td>{{ row['kappa'] }}</td>
                        <td>{{ row['brier'] }}</td>
                        <td>{{ row['logloss'] }}</td>
                        <td>{{ row['f2'] }}</td>
                        <td>{{ row['jaccard'] }}</td>
                        <td>{{ row['hamming'] }}</td>
                        <td>
                            <a href="{{ url_for('display_graphs', model_name=row['Model']) }}" class="view-graphs-btn">
                                View Graphs
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </section>

    <!-- Add a form to select metrics and plot them -->
    <section class="plot-metrics-section">
        <h2>Select Metrics to Plot</h2>
        <form action="{{ url_for('plot_metrics') }}" method="GET" id="metricsForm" onsubmit="return validateMetricsSelection()">
            <label for="metrics">Select metrics to plot:</label>
            <br>
            <select name="metrics" id="metrics" multiple>
                <option value="accuracy">Accuracy</option>
                <option value="precision">Precision</option>
                <option value="recall">Recall</option>
                <option value="f1">F1 Score</option>
                <option value="roc_auc">ROC AUC</option>
                <option value="mcc">MCC</option>
                <option value="balanced_accuracy">Balanced Accuracy</option>
                <option value="kappa">Kappa</option>
                <option value="brier">Brier</option>
                <option value="logloss">Log Loss</option>
                <option value="f2">F2 Score</option>
                <option value="jaccard">Jaccard</option>
                <option value="hamming">Hamming</option>
            </select>
            <br><br>
            <button type="submit" id="plotButton">Plot Metrics</button>
        </form>
    </section>

    <script>
    function validateMetricsSelection() {
        const metricsSelect = document.getElementById('metrics');
        const selectedOptions = Array.from(metricsSelect.selectedOptions);
        
        if (selectedOptions.length === 0) {
            alert('Please select at least one metric to plot.');
            return false;
        }
        return true;
    }
    </script>

    <footer>
        <p>ALS Detection App - Powered by Flask</p>
    </footer>
</body>
</html>
